---
import MainLayout from "../layouts/MainLayout.astro";
import Hero from "../components/Hero.svelte";
import PostCard from "../components/PostCard.svelte";

const posts = Object.values(import.meta.glob("./posts/*.mdx", { eager: true }));

function parseDate(dateString: string) {
  return new Date(dateString);
}
---

<MainLayout title="Pathfinder">
  <Hero client:idle />

  <h1 class="text-7xl mt-10 text-center font-bold font-serif">Posts</h1>
  <div class="grid md:grid-cols-3 gap-4 mt-9">
    {
      posts
        .filter((post) => (post as any).frontmatter?.published !== false)
        .sort(
          (a, b) =>
            parseDate((b as any).frontmatter.date).getTime() -
            parseDate((a as any).frontmatter.date).getTime()
        )
        .map((post) => (
          <PostCard
            url={(post as any).url}
            title={(post as any).frontmatter.title}
            description={(post as any).frontmatter.description}
            date={(post as any).frontmatter.date}
            tags={(post as any).frontmatter.tags}
          />
        ))
    }
  </div>

  <h1 class="text-7xl mt-10 text-center font-bold font-serif">Projects</h1>
  <div class="grid md:grid-cols-3 gap-4 mt-9">
    
  </div>
</MainLayout>
